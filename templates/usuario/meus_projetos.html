{% extends 'base.html' %}

{% block title %}Meus Projetos{% endblock %}

{% block estilos %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/usuario/meus_projetos.css') }}?v=1.1">
    {% endblock %}

{% block conteudo %}
<div class="page-header">
    <h1> Meus Projetos Publicados</h1>
    <p>Gerencie seus projetos, edite informações ou exclua projetos antigos.</p>
</div>

{% include 'componentes/erro.html' %}

{% if projetos %}
    <div class="projetos-grid">
        {% for projeto in projetos %}
        <div class="card-projeto-meus">
            <div class="card-body">
                <h2>{{ projeto.titulo }}</h2>
                <p>{{ projeto.descricao }}</p>
                <p class="curso">Curso: <strong>{{ projeto.curso }}</strong></p>
                <hr>
                
                <div class="card-actions">
                    
                    <a href="{{ url_for('projetos.ver_projeto', id=projeto.id) }}" class="btn action-btn ver">
                        <i class="fas fa-eye"></i> Ver
                    </a>

                    <a href="{{ url_for('projetos.editar_projeto', id=projeto.id) }}" class="btn action-btn editar">
                        <i class="fas fa-edit"></i> Editar
                    </a>

                    <form action="{{ url_for('projetos.excluir_projeto', id=projeto.id) }}" method="POST" 
                          onsubmit="return confirm('ATENÇÃO: Você tem certeza que deseja excluir o projeto \'{{ projeto.titulo }}\'? Esta ação é irreversível.');"
                          style="display: inline;">
                        <button type="submit" class="btn action-btn excluir">
                            <i class="fas fa-trash-alt"></i> Excluir
                        </button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <p>Você ainda não cadastrou nenhum projeto.</p>
        <a href="{{ url_for('projetos.criar_projeto') }}" class="btn-principal-v2">
            Cadastrar Meu Primeiro Projeto
        </a>
    </div>
{% endif %}
{% endblock %}
